<!doctype html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>登录</title>
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="https://v3.bootcss.com/favicon.ico">
        <link href="./css/bootstrap.min.css" rel="stylesheet">
        <link href="./css/signin.css" rel="stylesheet">
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/Api.js"></script>
    </head>
<body>
<div class="container">
    <form class="form-signin">
        <h2 class="form-signin-heading">Please sign in</h2>
        <label for="user_name" class="sr-only">username</label>
        <input type="text" id="user_name" class="form-control" placeholder="username" required="" autofocus="">
        <label for="user_pass" class="sr-only">Password</label>
        <input type="password" id="user_pass" class="form-control" placeholder="Password" required="">
        <button class="btn btn-lg btn-primary btn-block" type="button" onclick="loginClick()">Sign in</button>
    </form>
</div>
<script>
    function loginClick() {
        var user_name = $("#user_name").val()
        var user_pass = $("#user_pass").val()
        if (user_name == '') {
            alert("用户名不能为空")
            return
        }
        if (user_pass == '') {
            alert("密码不能为空")
            return
        }
        if (user_pass.length < 6) {
            alert("密码长度最小为6")
            return
        }
        $.post(URI_LOGIN,
            {"name": user_name, "pass": user_pass},
            function (result) {
                if (result.code == 200) {
                    sessionStorage.userId = result.data.id;
                    alert("登录成功")
                    location.replace("mockList.html")
                } else {
                    alert(result.message)
                }
            }),
            function (error) {
                alert("网络连接失败！")
            }
    }
</script>
</body>
</html>